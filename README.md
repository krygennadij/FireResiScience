# Calculation_MK - Расчет огнестойкости стальных строительных конструкций

Веб-приложение для расчета фактического предела огнестойкости стальных строительных конструкций в соответствии с российскими строительными нормами.

## Описание

Приложение выполняет расчет предела огнестойкости незащищенных стальных элементов (колонн, балок) при различных типах нагружения:
- Центральное растяжение
- Центральное сжатие
- Изгиб

Поддерживаемые типы сечений:
- Двутавры (ГОСТ)
- Швеллеры (ГОСТ 8240-97)
- Уголки равнополочные (ГОСТ 8509-93)
- Трубы прямоугольные
- Трубы круглые (ГОСТ 8732-78)

## Нормативные документы

Расчеты выполнены в соответствии с:
- **СП 16.13330.2017** - Стальные конструкции (прочностной расчет)
- **СП 2.13130.2020** - Обеспечение огнестойкости объектов защиты
- **ГОСТ 30247** - Стандартная температурная кривая пожара
- **ФЗ-123** - Технический регламент о требованиях пожарной безопасности

## Возможности

- Расчет критической температуры конструкции
- Моделирование прогрева в условиях стандартного пожара
- Определение фактического предела огнестойкости (R15, R30, R45, R60 и т.д.)
- Интерактивные графики нагрева Plotly
- Генерация профессиональных отчетов в формате DOCX
- Поддержка стандартных профилей по ГОСТ
- Возможность ввода пользовательских геометрических параметров

## Требования

- Python 3.8+
- Операционная система: Windows, Linux, macOS

## Установка

### 1. Клонирование репозитория

```bash
git clone <repository-url>
cd Calculation_MK
```

### 2. Создание виртуального окружения

**Windows:**
```bash
python -m venv venv
venv\Scripts\activate
```

**Linux/macOS:**
```bash
python3 -m venv venv
source venv/bin/activate
```

### 3. Установка зависимостей

```bash
pip install -r requirements.txt
```

## Запуск приложения

```bash
streamlit run app.py
```

После запуска приложение будет доступно по адресу: `http://localhost:8501`

## Структура проекта

```
Calculation_MK/
├── app.py                          # Главное приложение Streamlit
├── requirements.txt                # Зависимости проекта
├── README.md                       # Документация
├── .gitignore                      # Игнорируемые файлы
├── assets/                         # Изображения схем обогрева
│   ├── I_3_sides.png
│   ├── I_4_sides.svg
│   └── ...
├── src/                            # Модули расчета
│   ├── structural.py               # Прочностные расчеты
│   ├── thermal.py                  # Теплотехнические расчеты
│   ├── data.py                     # Справочные данные (коэффициенты)
│   ├── validation.py               # Валидация входных данных
│   ├── report_generator.py         # Генерация DOCX отчетов
│   ├── ibeam_data.py              # База данных двутавров
│   ├── channel_data.py            # База данных швеллеров
│   ├── angle_data.py              # База данных уголков
│   └── pipe_data.py               # База данных труб
└── Учебное пособие_...md          # Методическое пособие
```

## Использование

### 1. Выбор параметров сечения

В боковой панели выберите:
- Тип сечения (двутавр, швеллер, уголок, труба)
- Для стандартных профилей: выберите из списка ГОСТ
- Для пользовательских: введите геометрические размеры

### 2. Задание материала

- Выберите марку стали (C235, C245, C255, C345, C390 и др.)
- Проверьте автоматически рассчитанное значение Ryn
- При необходимости скорректируйте модуль упругости E

### 3. Задание нагрузок

Выберите тип нагружения:
- **Центральное растяжение/сжатие**: укажите продольную силу N (кН)
- **Центральное сжатие**: дополнительно укажите геометрическую длину и расчетную схему
- **Изгиб**: укажите изгибающий момент M (кН·м) и поперечную силу Q (кН)

### 4. Параметры пожара

- Выберите схему обогрева (3 или 4 стороны)
- Время расчета: фиксированно 60 минут

### 5. Просмотр результатов

**Вкладка "Расчет":**
- Детальные формулы с подстановкой численных значений
- Критическая температура
- График нагрева конструкции
- Фактический предел огнестойкости

**Вкладка "Отчет":**
- Заполните данные об объекте
- Сгенерируйте профессиональный отчет в формате DOCX

## Примеры расчета

### Пример 1: Двутавр при сжатии

```
Тип сечения: Двутавр I-20
Марка стали: C245
Нагрузка: 800 кН (сжатие)
Геометрическая длина: 3.5 м
Расчетная схема: Шарнир-Шарнир (μ=1.0)
Обогрев: 4 стороны
```

### Пример 2: Швеллер при изгибе

```
Тип сечения: Швеллер 16У
Марка стали: C255
Изгибающий момент: 25 кН·м
Поперечная сила: 60 кН
Обогрев: 3 стороны
```

## Методика расчета

### Прочностной расчет

1. Определение коэффициента использования сечения γT
2. Расчет критической температуры по таблице Б.1 (СП 2.13130.2020)

### Теплотехнический расчет

1. Расчет приведенной толщины металла δnp = A/П
2. Пошаговое моделирование прогрева (шаг 1 сек)
3. Стандартная температурная кривая: Tg(τ) = 345·log₁₀(8τ/60 + 1) + 293 K
4. Определение времени достижения критической температуры

## Ограничения

- Расчет только для незащищенных конструкций
- Стандартный температурный режим пожара (ГОСТ 30247)
- Не учитываются деформации и локальные эффекты
- Расчетное время до 60 минут

## Разработка

### Запуск тестов

```bash
pytest tests/
```

### Проверка кода

```bash
flake8 src/ app.py
```

## Устранение неполадок

### Ошибка "Module not found"

Убедитесь, что виртуальное окружение активировано и все зависимости установлены:
```bash
pip install -r requirements.txt
```

### Ошибка при генерации отчета

Для генерации графиков в DOCX требуется библиотека `kaleido`:
```bash
pip install kaleido
```

### Проблемы с кодировкой

Убедитесь, что файлы имеют кодировку UTF-8.

## Контакты и поддержка

Если у вас возникли вопросы или предложения:
- Создайте Issue в репозитории
- Отправьте Pull Request с улучшениями

## Лицензия

Проект разработан для образовательных и коммерческих целей в области пожарной безопасности строительных конструкций.

## История изменений

### Версия 1.0.0 (2026-01-08)
- Исправлены критические ошибки:
  - Исправлен requirements.txt (python-docx)
  - Удалено дублирование функции calculate_geometry_ibeam
  - Убраны вызовы importlib.reload()
- Добавлена валидация входных данных
- Создан .gitignore
- Добавлена документация README.md

### Версия 0.9.0
- Первоначальный релиз
- Базовая функциональность расчетов

## Благодарности

Проект разработан с использованием:
- [Streamlit](https://streamlit.io/) - фреймворк для веб-приложений
- [Plotly](https://plotly.com/) - интерактивные графики
- [python-docx](https://python-docx.readthedocs.io/) - генерация DOCX
- Российские строительные нормы и правила

---

**Примечание:** Результаты расчетов носят справочный характер. Для ответственных конструкций рекомендуется проведение дополнительной экспертизы.
